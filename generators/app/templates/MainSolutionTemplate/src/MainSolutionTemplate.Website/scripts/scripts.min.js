/*! MainSolutionTemplate 2015-02-24 */
"use strict";angular.module("webapp",["ngMaterial","angular-loading-bar","webapp.routes","webapp.controllers","webapp.directives","webapp.filters","webapp.services"]).value("tokenUrl","http://localhost:8081/token").value("apiUrlBase","http://localhost:8081/api").value("signalrBase","http://localhost:8081/signalr").config(function(a){a.theme("default").primaryPalette("light-green").accentPalette("amber")}).config(["cfpLoadingBarProvider",function(a){a.includeSpinner=!1}]).run(["authorizationService",function(a){a.isAuthenticatedOrRedirect()}]),angular.module("webapp.controllers",["ngMaterial"]),angular.module("webapp.controllers").controller("dashboardCtrl",["$scope","$mdSidenav","$mdBottomSheet","$log","dataService","messageService",function(a,b,c,d,e,f){function g(b){function f(a){this.items=[{name:"Add",icon:"add"},{name:"Update",icon:"update"},{name:"Delete",icon:"delete"}],this.performAction=function(b){a.hide(b)}}c.show({parent:angular.element(document.getElementById("content")),templateUrl:"views/dashboard_bottom.html",bindToController:!0,controllerAs:"vm",controller:["$mdBottomSheet",f],targetEvent:b}).then(function(b){if(d.debug(b.name+" clicked!"),"Add"==b.name)e.users.post({Name:"Sample "+new Date,Email:"Sample"});else if("Delete"==b.name){var c=null;angular.forEach(a.users,function(a){c=a}),null!=c&&e.users["delete"](c.Id)}else if("Update"==b.name){var c=null;angular.forEach(a.users,function(a){c=a}),null!=c&&e.users.put(c.Id,{Name:"Sample "+new Date,Email:"Sample312"})}})}a.showActions=g,a.users=[],e.whenConnected().then(function(){e.users.getAll().then(function(b){angular.forEach(b,function(b){a.users.push(b)})},function(a){d.error(a)})},f.error,f.debug),e.users.onUpdate(a,a.users)}]),angular.module("webapp.controllers").controller("forgotPasswordCtrl",["$scope","$log","messageService","authorizationService","$location",function(a,b,c,d,e){function f(){var b=d.forgotPassword(a.model.email);b.then(function(){c.info("Your password has been sent to your email"),e.path("/login")},c.error)}var g=d.currentSession();a.model={email:g.email},a.forgotPassword=f}]),angular.module("webapp.controllers").controller("loginCtrl",["$scope","$log","messageService","authorizationService","$location",function(a,b,c,d,e){function f(){var b=d.authenticate(a.model.email,a.model.password);b.then(function(){d.continueToPage()},function(b){a.model.password="",c.error(b||"Invalid username or password.")},c.info)}function g(){e.path("forgotPassword")}var h=d.currentSession();a.model={email:h.email,password:""},a.login=f,a.forgotPassword=g}]),angular.module("webapp.controllers").controller("navigationCtrl",["$scope","$rootScope","$mdSidenav","authorizationService","$timeout","$location",function(a,b,c,d,e,f){function g(a){c(a).toggle()}function h(a){d.logout(),c(a).toggle()}a.toggleSidenav=g,a.logout=h,b.$watch("isAuthenticated",function(a){a||e(function(){c("left").close()},500)})}]),angular.module("webapp.directives",[]),angular.module("webapp.filters",[]),angular.module("webapp.routes",["ngRoute"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/dashboard.html",controller:"dashboardCtrl"}).when("/login",{templateUrl:"views/login.html",controller:"loginCtrl"}).when("/forgotPassword",{templateUrl:"views/forgotPassword.html",controller:"forgotPasswordCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("webapp",["ngMaterial","angular-loading-bar","webapp.routes","webapp.controllers","webapp.directives","webapp.filters","webapp.services"]).value("tokenUrl","http://localhost:8081/token").value("apiUrlBase","http://localhost:8081/api").value("signalrBase","http://localhost:8081/signalr").config(function(a){a.theme("default").primaryPalette("light-green").accentPalette("amber")}).config(["cfpLoadingBarProvider",function(a){a.includeSpinner=!1}]).run(["authorizationService",function(a){a.isAuthenticatedOrRedirect()}]),angular.module("webapp.controllers",["ngMaterial"]),angular.module("webapp.controllers").controller("dashboardCtrl",["$scope","$mdSidenav","$mdBottomSheet","$log","dataService","messageService",function(a,b,c,d,e,f){function g(b){function f(a){this.items=[{name:"Add",icon:"add"},{name:"Update",icon:"update"},{name:"Delete",icon:"delete"}],this.performAction=function(b){a.hide(b)}}c.show({parent:angular.element(document.getElementById("content")),templateUrl:"views/dashboard_bottom.html",bindToController:!0,controllerAs:"vm",controller:["$mdBottomSheet",f],targetEvent:b}).then(function(b){if(d.debug(b.name+" clicked!"),"Add"==b.name)e.users.post({Name:"Sample "+new Date,Email:"Sample"});else if("Delete"==b.name){var c=null;angular.forEach(a.users,function(a){c=a}),null!=c&&e.users["delete"](c.Id)}else if("Update"==b.name){var c=null;angular.forEach(a.users,function(a){c=a}),null!=c&&e.users.put(c.Id,{Name:"Sample "+new Date,Email:"Sample312"})}})}a.showActions=g,a.users=[],e.whenConnected().then(function(){e.users.getAll().then(function(b){angular.forEach(b,function(b){a.users.push(b)})},function(a){d.error(a)})},f.error,f.debug),e.users.onUpdate(a,a.users)}]),angular.module("webapp.controllers").controller("forgotPasswordCtrl",["$scope","$log","messageService","authorizationService","$location",function(a,b,c,d,e){function f(){var b=d.forgotPassword(a.model.email);b.then(function(){c.info("Your password has been sent to your email"),e.path("/login")},c.error)}var g=d.currentSession();a.model={email:g.email},a.forgotPassword=f}]),angular.module("webapp.controllers").controller("loginCtrl",["$scope","$log","messageService","authorizationService","$location",function(a,b,c,d,e){function f(){var b=d.authenticate(a.model.email,a.model.password);b.then(function(){d.continueToPage()},function(b){a.model.password="",c.error(b||"Invalid username or password.")},c.info)}function g(){e.path("forgotPassword")}var h=d.currentSession();a.model={email:h.email,password:""},a.login=f,a.forgotPassword=g}]),angular.module("webapp.controllers").controller("navigationCtrl",["$scope","$rootScope","$mdSidenav","authorizationService","$timeout","$location",function(a,b,c,d,e,f){function g(a){c(a).toggle()}function h(a){d.logout(),c(a).toggle()}a.toggleSidenav=g,a.logout=h,b.$watch("isAuthenticated",function(a){a||e(function(){c("left").close()},500)})}]),angular.module("webapp.directives",[]),angular.module("webapp.filters",[]),angular.module("webapp.routes",["ngRoute"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/dashboard.html",controller:"dashboardCtrl"}).when("/login",{templateUrl:"views/login.html",controller:"loginCtrl"}).when("/forgotPassword",{templateUrl:"views/forgotPassword.html",controller:"forgotPasswordCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("webapp",["ngMaterial","angular-loading-bar","webapp.routes","webapp.controllers","webapp.directives","webapp.filters","webapp.services"]).value("tokenUrl","http://localhost:8081/token").value("apiUrlBase","http://localhost:8081/api").value("signalrBase","http://localhost:8081/signalr").config(function(a){a.theme("default").primaryPalette("light-green").accentPalette("amber")}).config(["cfpLoadingBarProvider",function(a){a.includeSpinner=!1}]).run(["authorizationService",function(a){a.isAuthenticatedOrRedirect()}]),angular.module("webapp.controllers",["ngMaterial"]),angular.module("webapp.controllers").controller("dashboardCtrl",["$scope","$mdSidenav","$mdBottomSheet","$log","dataService","messageService",function(a,b,c,d,e,f){function g(b){function f(a){this.items=[{name:"Add",icon:"add"},{name:"Update",icon:"update"},{name:"Delete",icon:"delete"}],this.performAction=function(b){a.hide(b)}}c.show({parent:angular.element(document.getElementById("content")),templateUrl:"views/dashboard_bottom.html",bindToController:!0,controllerAs:"vm",controller:["$mdBottomSheet",f],targetEvent:b}).then(function(b){if(d.debug(b.name+" clicked!"),"Add"==b.name)e.users.post({Name:"Sample "+new Date,Email:"Sample"});else if("Delete"==b.name){var c=null;angular.forEach(a.users,function(a){c=a}),null!=c&&e.users["delete"](c.Id)}else if("Update"==b.name){var c=null;angular.forEach(a.users,function(a){c=a}),null!=c&&e.users.put(c.Id,{Name:"Sample "+new Date,Email:"Sample312"})}})}a.showActions=g,a.users=[],e.whenConnected().then(function(){e.users.getAll().then(function(b){angular.forEach(b,function(b){a.users.push(b)})},function(a){d.error(a)})},f.error,f.debug),e.users.onUpdate(a,a.users)}]),angular.module("webapp.controllers").controller("forgotPasswordCtrl",["$scope","$log","messageService","authorizationService","$location",function(a,b,c,d,e){function f(){var b=d.forgotPassword(a.model.email);b.then(function(){c.info("Your password has been sent to your email"),e.path("/login")},c.error)}var g=d.currentSession();a.model={email:g.email},a.forgotPassword=f}]),angular.module("webapp.controllers").controller("loginCtrl",["$scope","$log","messageService","authorizationService","$location",function(a,b,c,d,e){function f(){var b=d.authenticate(a.model.email,a.model.password);b.then(function(){d.continueToPage()},function(b){a.model.password="",c.error(b||"Invalid username or password.")},c.info)}function g(){e.path("forgotPassword")}var h=d.currentSession();a.model={email:h.email,password:""},a.login=f,a.forgotPassword=g}]),angular.module("webapp.controllers").controller("navigationCtrl",["$scope","$rootScope","$mdSidenav","authorizationService","$timeout","$location",function(a,b,c,d,e,f){function g(a){c(a).toggle()}function h(a){d.logout(),c(a).toggle()}a.toggleSidenav=g,a.logout=h,b.$watch("isAuthenticated",function(a){a||e(function(){c("left").close()},500)})}]),angular.module("webapp.directives",[]),angular.module("webapp.filters",[]),angular.module("webapp.routes",["ngRoute"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/dashboard.html",controller:"dashboardCtrl"}).when("/login",{templateUrl:"views/login.html",controller:"loginCtrl"}).when("/forgotPassword",{templateUrl:"views/forgotPassword.html",controller:"forgotPasswordCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("webapp.services",["LocalStorageModule"]),angular.module("webapp.services").service("authorizationService",["$log","$http","localStorageService","tokenUrl","apiUrlBase","$q","$location","$rootScope",function(a,b,c,d,e,f,g,h){function i(){c.set("token",l),h.isAuthenticated=j()}function j(){return null!=l.accessToken}var k="MainSolutionTemplate.Api",l=c.get("token")||{},m="/",n=["/login","/forgotPassword"];return h.isAuthenticated=j(),{currentSession:function(){return l},continueToPage:function(){g.path(m)},isAuthenticatedOrRedirect:function(){n.indexOf(g.path())>=0||this.isAuthenticate()||(m=g.path(),console.log(m),g.path("/login"))},isAuthenticate:j,logout:function(){l.accessToken=null,i(),g.path("/login")},authenticate:function(c,e){var g=f.defer(),h={method:"POST",url:d,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:"client_id="+k+"&grant_type=password&username="+c+"&password="+e};return b(h).success(function(a){l.expires=Date.parse(a[".expires"]),l.issued=Date.parse(a[".issued"]),l.accessToken=a.access_token,l.displayName=a.displayName,l.permissions=a.permissions,l.email=a.userName,i(),g.resolve(a)}).error(function(b){a.error("Auth ERROR: ",b),g.reject(b&&b.error_description?b.error_description:"Unable to contact server; please, try again later.")}),g.promise},forgotPassword:function(a){var c=f.defer();return b.get(e+"/user/forgotPassword/"+a).success(function(a){c.resolve(a)}).error(function(a){c.reject(a&&a.error_description?a.error_description:"Unable to contact server; please, try again later.")}),c.promise}}}]),angular.module("webapp.services").service("dataService",["$log","signalrBase","authorizationService","$q","$rootScope",function(a,b,c,d,e){function f(){h=c.currentSession().accessToken;var f=d.defer();console.log("Authenticated:"+c.isAuthenticate()),$.connection.hub.url=b,j=$.hubConnection(),j.qs={bearer:c.currentSession().accessToken},k=j.createHubProxy("UserHub"),k.on("OnUpdate",function(a){e.$emit("userHub.OnUpdate",a)});var g=j.start();return g.done(function(){f.resolve(j)}),g.fail(function(b){a.error("signalRFail:"+b.message),f.reject(b.message)}),f.promise}function g(a,b,c){angular.isArray(c)?a.$apply(function(){0==b.UpdateType?c.push(b.Value):2==b.UpdateType?angular.forEach(c,function(a,d){b.Value.Id==a.Id&&c.splice(d)}):1==b.UpdateType&&angular.forEach(c,function(a){b.Value.Id==a.Id&&angular.copy(b.Value,a)})}):c(b)}var h=null,i=null,j=null,k={};return{whenConnected:function(){return h!=c.currentSession().accessToken&&(j&&(j.stop(),j=null),i=f()),i},users:{getAll:function(){return k.invoke("Get")},get:function(a){return k.invoke("Get",a)},post:function(a){return k.invoke("Post",a)},put:function(a,b){return k.invoke("Put",a,b)},"delete":function(a){return k.invoke("Delete",a)},onUpdate:function(a,b){var c=e.$on("userHub.OnUpdate",function(c,d){g(a,d,b)});return a.$on("$destroy",function(){c()}),c}}}}]),angular.module("webapp.services").service("messageService",["$log","$mdToast",function(a,b){var c="top left right";return{info:function(d){a.info(d),b.show(b.simple().content(d).position(c).hideDelay(3e3))},warn:function(d){a.warn(d),b.show(b.simple().content(d).position(c).hideDelay(3e3))},error:function(d){a.error(d),b.show(b.simple().content(d).position(c).hideDelay(3e3))},debug:function(b){a.debug(b)}}}]),angular.module("webapp.services",["LocalStorageModule"]),angular.module("webapp.services").service("authorizationService",["$log","$http","localStorageService","tokenUrl","apiUrlBase","$q","$location","$rootScope",function(a,b,c,d,e,f,g,h){function i(){c.set("token",l),h.isAuthenticated=j()}function j(){return null!=l.accessToken}var k="MainSolutionTemplate.Api",l=c.get("token")||{},m="/",n=["/login","/forgotPassword"];return h.isAuthenticated=j(),{currentSession:function(){return l},continueToPage:function(){g.path(m)},isAuthenticatedOrRedirect:function(){n.indexOf(g.path())>=0||this.isAuthenticate()||(m=g.path(),console.log(m),g.path("/login"))},isAuthenticate:j,logout:function(){l.accessToken=null,i(),g.path("/login")},authenticate:function(c,e){var g=f.defer(),h={method:"POST",url:d,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:"client_id="+k+"&grant_type=password&username="+c+"&password="+e};return b(h).success(function(a){l.expires=Date.parse(a[".expires"]),l.issued=Date.parse(a[".issued"]),l.accessToken=a.access_token,l.displayName=a.displayName,l.permissions=a.permissions,l.email=a.userName,i(),g.resolve(a)}).error(function(b){a.error("Auth ERROR: ",b),g.reject(b&&b.error_description?b.error_description:"Unable to contact server; please, try again later.")}),g.promise},forgotPassword:function(a){var c=f.defer();return b.get(e+"/user/forgotPassword/"+a).success(function(a){c.resolve(a)}).error(function(a){c.reject(a&&a.error_description?a.error_description:"Unable to contact server; please, try again later.")}),c.promise}}}]),angular.module("webapp.services").service("dataService",["$log","signalrBase","authorizationService","$q","$rootScope",function(a,b,c,d,e){function f(){h=c.currentSession().accessToken;var f=d.defer();console.log("Authenticated:"+c.isAuthenticate()),$.connection.hub.url=b,j=$.hubConnection(),j.qs={bearer:c.currentSession().accessToken},k=j.createHubProxy("UserHub"),k.on("OnUpdate",function(a){e.$emit("userHub.OnUpdate",a)});var g=j.start();return g.done(function(){f.resolve(j)}),g.fail(function(b){a.error("signalRFail:"+b.message),f.reject(b.message)}),f.promise}function g(a,b,c){angular.isArray(c)?a.$apply(function(){0==b.UpdateType?c.push(b.Value):2==b.UpdateType?angular.forEach(c,function(a,d){b.Value.Id==a.Id&&c.splice(d)}):1==b.UpdateType&&angular.forEach(c,function(a){b.Value.Id==a.Id&&angular.copy(b.Value,a)})}):c(b)}var h=null,i=null,j=null,k={};return{whenConnected:function(){return h!=c.currentSession().accessToken&&(j&&(j.stop(),j=null),i=f()),i},users:{getAll:function(){return k.invoke("Get")},get:function(a){return k.invoke("Get",a)},post:function(a){return k.invoke("Post",a)},put:function(a,b){return k.invoke("Put",a,b)},"delete":function(a){return k.invoke("Delete",a)},onUpdate:function(a,b){var c=e.$on("userHub.OnUpdate",function(c,d){g(a,d,b)});return a.$on("$destroy",function(){c()}),c}}}}]),angular.module("webapp.services").service("messageService",["$log","$mdToast",function(a,b){var c="top left right";return{info:function(d){a.info(d),b.show(b.simple().content(d).position(c).hideDelay(3e3))},warn:function(d){a.warn(d),b.show(b.simple().content(d).position(c).hideDelay(3e3))},error:function(d){a.error(d),b.show(b.simple().content(d).position(c).hideDelay(3e3))},debug:function(b){a.debug(b)}}}]),angular.module("webapp.services",["LocalStorageModule"]),angular.module("webapp.services").service("authorizationService",["$log","$http","localStorageService","tokenUrl","apiUrlBase","$q","$location","$rootScope",function(a,b,c,d,e,f,g,h){function i(){c.set("token",l),h.isAuthenticated=j()}function j(){return null!=l.accessToken}var k="MainSolutionTemplate.Api",l=c.get("token")||{},m="/",n=["/login","/forgotPassword"];return h.isAuthenticated=j(),{currentSession:function(){return l},continueToPage:function(){g.path(m)},isAuthenticatedOrRedirect:function(){n.indexOf(g.path())>=0||this.isAuthenticate()||(m=g.path(),console.log(m),g.path("/login"))},isAuthenticate:j,logout:function(){l.accessToken=null,i(),g.path("/login")},authenticate:function(c,e){var g=f.defer(),h={method:"POST",url:d,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:"client_id="+k+"&grant_type=password&username="+c+"&password="+e};return b(h).success(function(a){l.expires=Date.parse(a[".expires"]),l.issued=Date.parse(a[".issued"]),l.accessToken=a.access_token,l.displayName=a.displayName,l.permissions=a.permissions,l.email=a.userName,i(),g.resolve(a)}).error(function(b){a.error("Auth ERROR: ",b),g.reject(b&&b.error_description?b.error_description:"Unable to contact server; please, try again later.")}),g.promise},forgotPassword:function(a){var c=f.defer();return b.get(e+"/user/forgotPassword/"+a).success(function(a){c.resolve(a)}).error(function(a){c.reject(a&&a.error_description?a.error_description:"Unable to contact server; please, try again later.")}),c.promise}}}]),angular.module("webapp.services").service("dataService",["$log","signalrBase","authorizationService","$q","$rootScope",function(a,b,c,d,e){function f(){h=c.currentSession().accessToken;var f=d.defer();console.log("Authenticated:"+c.isAuthenticate()),$.connection.hub.url=b,j=$.hubConnection(),j.qs={bearer:c.currentSession().accessToken},k=j.createHubProxy("UserHub"),k.on("OnUpdate",function(a){e.$emit("userHub.OnUpdate",a)});var g=j.start();return g.done(function(){f.resolve(j)}),g.fail(function(b){a.error("signalRFail:"+b.message),f.reject(b.message)}),f.promise}function g(a,b,c){angular.isArray(c)?a.$apply(function(){0==b.UpdateType?c.push(b.Value):2==b.UpdateType?angular.forEach(c,function(a,d){b.Value.Id==a.Id&&c.splice(d)}):1==b.UpdateType&&angular.forEach(c,function(a){b.Value.Id==a.Id&&angular.copy(b.Value,a)})}):c(b)}var h=null,i=null,j=null,k={};return{whenConnected:function(){return h!=c.currentSession().accessToken&&(j&&(j.stop(),j=null),i=f()),i},users:{getAll:function(){return k.invoke("Get")},get:function(a){return k.invoke("Get",a)},post:function(a){return k.invoke("Post",a)},put:function(a,b){return k.invoke("Put",a,b)},"delete":function(a){return k.invoke("Delete",a)},onUpdate:function(a,b){var c=e.$on("userHub.OnUpdate",function(c,d){g(a,d,b)});return a.$on("$destroy",function(){c()}),c}}}}]),angular.module("webapp.services").service("messageService",["$log","$mdToast",function(a,b){var c="top left right";return{info:function(d){a.info(d),b.show(b.simple().content(d).position(c).hideDelay(3e3))},warn:function(d){a.warn(d),b.show(b.simple().content(d).position(c).hideDelay(3e3))},error:function(d){a.error(d),b.show(b.simple().content(d).position(c).hideDelay(3e3))},debug:function(b){a.debug(b)}}}]);